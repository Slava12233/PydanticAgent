"""
תבניות פרומפטים לטיפול בשגיאות
"""

# הודעות שגיאה בסיסיות
ERROR_MESSAGES = {
    "general": """
    מצטער, אני לא יכול לענות על השאלה שלך כרגע בגלל בעיות טכניות.
    אנא נסה שוב מאוחר יותר.
    """,
    
    "quota": """
    מצטער, אני לא יכול לענות על השאלה שלך כרגע בגלל בעיות טכניות.
    נראה שיש בעיה עם מכסת השימוש ב-API.
    אנא נסה להשתמש בפקודה /switch_model gpt-3.5-turbo כדי לעבור למודל אחר,
    או נסה שוב מאוחר יותר.
    """,
    
    "api": """
    מצטער, אני לא יכול לענות על השאלה שלך כרגע בגלל בעיות תקשורת עם השרת.
    אנא נסה שוב מאוחר יותר.
    """,
    
    "database": """
    מצטער, אני לא יכול לגשת למסד הנתונים כרגע.
    אנא נסה שוב מאוחר יותר.
    """,
    
    "permission": """
    מצטער, אין לך הרשאות מתאימות לבצע את הפעולה הזו.
    אנא פנה למנהל המערכת לקבלת הרשאות מתאימות.
    """,
    
    "validation": """
    מצטער, הנתונים שהזנת אינם תקינים.
    אנא בדוק את הנתונים ונסה שוב.
    """,
    
    "not_found": """
    מצטער, לא מצאתי את מה שחיפשת.
    אנא בדוק את הנתונים ונסה שוב.
    """,
    
    "timeout": """
    מצטער, הפעולה ארכה זמן רב מדי.
    אנא נסה שוב מאוחר יותר.
    """,
    
    "rate_limit": """
    מצטער, הגעת למגבלת הבקשות המותרת.
    אנא המתן מספר דקות ונסה שוב.
    """
}

# פרומפטים לטיפול בשגיאות
ERROR_PROMPTS = {
    "general": """
    אתה מומחה בפתרון בעיות טכניות.
    אתה מסביר את הבעיות בצורה ברורה ומציע פתרונות מעשיים.
    אתה תמיד מנסה להבין את שורש הבעיה ולא רק את הסימפטומים.
    אתה מציע דרכים למנוע בעיות דומות בעתיד.
    """,
    
    "api": """
    אתה מומחה בפתרון בעיות API.
    אתה מבין היטב את הפרוטוקולים והשגיאות הנפוצות.
    אתה יודע לזהות בעיות תקשורת ולהציע פתרונות.
    אתה מסביר את הבעיות בצורה טכנית אך ברורה.
    """,
    
    "database": """
    אתה מומחה בפתרון בעיות מסד נתונים.
    אתה מבין היטב את המבנה והפעולות של מסדי נתונים.
    אתה יודע לזהות בעיות ביצועים ושגיאות נפוצות.
    אתה מציע פתרונות לשיפור ביצועים ואמינות.
    """,
    
    "security": """
    אתה מומחה באבטחת מידע.
    אתה מבין היטב את הסיכונים והאיומים הנפוצים.
    אתה יודע לזהות בעיות אבטחה ולהציע פתרונות.
    אתה מקפיד על עקרונות אבטחה מקובלים.
    """
}

def get_error_message(error_type: str) -> str:
    """
    קבלת הודעת שגיאה מתאימה
    
    Args:
        error_type: סוג השגיאה
        
    Returns:
        הודעת שגיאה מתאימה
    """
    return ERROR_MESSAGES.get(error_type, ERROR_MESSAGES["general"]).strip()

def get_error_prompt(error_type: str) -> str:
    """
    קבלת פרומפט לטיפול בשגיאה
    
    Args:
        error_type: סוג השגיאה
        
    Returns:
        פרומפט מתאים לטיפול בשגיאה
    """
    return ERROR_PROMPTS.get(error_type, ERROR_PROMPTS["general"]).strip()

def format_error_response(error_type: str, details: str = "") -> str:
    """
    פורמט תשובה לשגיאה
    
    Args:
        error_type: סוג השגיאה
        details: פרטים נוספים על השגיאה (אופציונלי)
        
    Returns:
        תשובה מפורמטת
    """
    error_message = get_error_message(error_type)
    if details:
        error_message += f"\n\nפרטי השגיאה:\n{details}"
    return error_message 